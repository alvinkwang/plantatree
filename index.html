<!doctype html>
<html xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<title>PlantATree by alvinkwang</title>

<link rel="stylesheet" href="stylesheets/styles.css">
<link rel="stylesheet" href="stylesheets/pygment_trac.css">
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no">
<!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>

	<!-- FB Login Button -->
	<!-- <div id="fb-root"></div>
	<script>
		(function(d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id))
				return;
			js = d.createElement(s);
			js.id = id;
			js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=223110031167007";
			fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));
		
	</script> -->

<div id="fb-root"></div>
        <script type="text/javascript">
            var button;
            var userInfo;
            
            window.fbAsyncInit = function() {
                FB.init({ appId: '223110031167007', //change the appId to your appId
                    status: true, 
                    cookie: true,
                    xfbml: true,
                    oauth: true});

               showLoader(true);
               
               function updateButton(response) {
                    button       =   document.getElementById('fb-auth');
                    userInfo     =   document.getElementById('user-info');
                    
                    if (response.authResponse) {
                        //user is already logged in and connected
                        FB.api('/me', function(info) {
                            login(response, info);
                        });
                        
                        button.onclick = function() {
                            FB.logout(function(response) {
                                logout(response);
                            });
                        };
                    } else {
                        //user is not connected to your app or logged out
                        button.innerHTML = 'Login';
                        button.onclick = function() {
                            showLoader(true);
                            FB.login(function(response) {
                                if (response.authResponse) {
                                    FB.api('/me', function(info) {
                                        login(response, info);
                                    });	   
                                } else {
                                    //user cancelled login or did not grant authorization
                                    showLoader(false);
                                }
                            }, {scope:'email,user_birthday,status_update,publish_stream,user_about_me'});  	
                        }
                    }
                }
                
                // run once with current status and whenever the status changes
                FB.getLoginStatus(updateButton);
                FB.Event.subscribe('auth.statusChange', updateButton);	
            };
            (function() {
                var e = document.createElement('script'); e.async = true;
                e.src = document.location.protocol 
                    + '//connect.facebook.net/en_US/all.js';
                document.getElementById('fb-root').appendChild(e);
            }());
            
            
            function login(response, info){
                if (response.authResponse) {
                    var accessToken                                 =   response.authResponse.accessToken;
                    
                    userInfo.innerHTML                             = '<img src="https://graph.facebook.com/' + info.id + '/picture">' + info.name
                                                                     + "<br /> Your Access Token: " + accessToken;
                    button.innerHTML                               = 'Logout';
                    showLoader(false);
                    document.getElementById('other').style.display = "block";
                }
            }
        
            function logout(response){
                userInfo.innerHTML                             =   "";
                document.getElementById('debug').innerHTML     =   "";
                document.getElementById('other').style.display =   "none";
                showLoader(false);
            }

            //stream publish method
            function streamPublish(name, description, hrefTitle, hrefLink, userPrompt){
                showLoader(true);
                FB.ui(
                {
                    method: 'stream.publish',
                    message: '',
                    attachment: {
                        name: name,
                        caption: '',
                        description: (description),
                        href: hrefLink
                    },
                    action_links: [
                        { text: hrefTitle, href: hrefLink }
                    ],
                    user_prompt_message: userPrompt
                },
                function(response) {
                    showLoader(false);
                });

            }
            function showStream(){
                FB.api('/me', function(response) {
                    //console.log(response.id);
                    streamPublish(response.name, 'I like the articles of Thinkdiff.net', 'hrefTitle', 'http://thinkdiff.net', "Share thinkdiff.net");
                });
            }

            function share(){
                showLoader(true);
                var share = {
                    method: 'stream.share',
                    u: 'http://thinkdiff.net/'
                };

                FB.ui(share, function(response) { 
                    showLoader(false);
                    console.log(response); 
                });
            }

            function graphStreamPublish(){
                showLoader(true);
                
                FB.api('/me/feed', 'post', 
                    { 
                        message     : "I love thinkdiff.net for facebook app development tutorials",
                        link        : 'http://ithinkdiff.net',
                        picture     : 'http://thinkdiff.net/iphone/lucky7_ios.jpg',
                        name        : 'iOS Apps & Games',
                        description : 'Checkout iOS apps and games from iThinkdiff.net. I found some of them are just awesome!'
                        
                }, 
                function(response) {
                    showLoader(false);
                    
                    if (!response || response.error) {
                        alert('Error occured');
                    } else {
                        alert('Post ID: ' + response.id);
                    }
                });
            }

            function fqlQuery(){
                showLoader(true);
                
                FB.api('/me', function(response) {
                    showLoader(false);
                    
                    //http://developers.facebook.com/docs/reference/fql/user/
                    var query       =  FB.Data.query('select name, profile_url, sex, pic_small from user where uid={0}', response.id);
                    query.wait(function(rows) {
                       document.getElementById('debug').innerHTML =  
                         'FQL Information: '+  "<br />" + 
                         'Your name: '      +  rows[0].name                                                            + "<br />" +
                         'Your Sex: '       +  (rows[0].sex!= undefined ? rows[0].sex : "")                            + "<br />" +
                         'Your Profile: '   +  "<a href='" + rows[0].profile_url + "'>" + rows[0].profile_url + "</a>" + "<br />" +
                         '<img src="'       +  rows[0].pic_small + '" alt="" />' + "<br />";
                     });
                });
            }

            function setStatus(){
                showLoader(true);
                
                status1 = document.getElementById('status').value;
                FB.api(
                  {
                    method: 'status.set',
                    status: status1
                  },
                  function(response) {
                    if (response == 0){
                        alert('Your facebook status not updated. Give Status Update Permission.');
                    }
                    else{
                        alert('Your facebook status updated');
                    }
                    showLoader(false);
                  }
                );
            }
            
            function showLoader(status){
                if (status)
                    document.getElementById('loader').style.display = 'block';
                else
                    document.getElementById('loader').style.display = 'none';
            }
            
        </script>
        
        <h3>New JavaScript SDK & OAuth 2.0 based FBConnect Tutorial | Thinkdiff.net</h3>
        <button id="fb-auth">Login</button>
        <div id="loader" style="display:none">
            <img src="ajax-loader.gif" alt="loading" />
        </div>
        <br />
        <div id="user-info"></div>
        <br />
        <div id="debug"></div>
        
        <div id="other" style="display:none">
            <a href="#" onclick="showStream(); return false;">Publish Wall Post</a> |
            <a href="#" onclick="share(); return false;">Share With Your Friends</a> |
            <a href="#" onclick="graphStreamPublish(); return false;">Publish Stream Using Graph API</a> |
            <a href="#" onclick="fqlQuery(); return false;">FQL Query Example</a>
            
            <br />
            <textarea id="status" cols="50" rows="5">Write your status here and click 'Status Set Using Legacy Api Call'</textarea>
            <br />
            <a href="#" onclick="setStatus(); return false;">Status Set Using Legacy Api Call</a>
        </div>


	<div class="wrapper">
		<header>
			<h1>PlantATree</h1>

			<!-- 	<div class="fb-login-button" data-show-faces="false" data-width="200"
				data-max-rows="1"></div> -->

			<p></p>

			<p class="view">
				<a href="https://github.com/alvinkwang/plantatree">View the
					Project on GitHub <small>alvinkwang/plantatree</small>
				</a>
			</p>


			<ul>
				<li><a
					href="https://github.com/alvinkwang/plantatree/zipball/master">Download
						<strong>ZIP File</strong>
				</a></li>
				<li><a
					href="https://github.com/alvinkwang/plantatree/tarball/master">Download
						<strong>TAR Ball</strong>
				</a></li>
				<li><a href="https://github.com/alvinkwang/plantatree">View
						On <strong>GitHub</strong>
				</a></li>
			</ul>
		</header>
		<section>
			<h3>Welcome to GitHub Pages.</h3>

			<p>This automatic page generator is the easiest way to create
				beautiful pages for all of your projects. Author your page content
				here using GitHub Flavored Markdown, select a template crafted by a
				designer, and publish. After your page is generated, you can check
				out the new branch:</p>

			<pre>
				<code>$ cd your_repo_root/repo_name
$ git fetch origin
$ git checkout gh-pages
</code>
			</pre>

			<p>If you're using the GitHub for Mac, simply sync your
				repository and you'll see the new branch.</p>

			<h3>Designer Templates</h3>

			<p>We've crafted some handsome templates for you to use. Go ahead
				and continue to layouts to browse through them. You can easily go
				back to edit your page before publishing. After publishing your
				page, you can revisit the page generator and switch to another
				theme. Your Page content will be preserved if it remained markdown
				format.</p>

			<h3>Rather Drive Stick?</h3>

			<p>
				If you prefer to not use the automatic generator, push a branch
				named
				<code>gh-pages</code>
				to your repository to create a page manually. In addition to
				supporting regular HTML content, GitHub Pages support Jekyll, a
				simple, blog aware static site generator written by our own Tom
				Preston-Werner. Jekyll makes it easy to create site-wide headers and
				footers without having to copy them across every page. It also
				offers intelligent blog support and other advanced templating
				features.
			</p>

			<h3>Authors and Contributors</h3>

			<p>
				You can <a href="https://github.com/blog/821" class="user-mention">@mention</a>
				a GitHub username to generate a link to their profile. The resulting
				<code>&lt;a&gt;</code>
				element will link to the contributor's GitHub Profile. For example:
				In 2007, Chris Wanstrath (<a href="https://github.com/defunkt"
					class="user-mention">@defunkt</a>), PJ Hyett (<a
					href="https://github.com/pjhyett" class="user-mention">@pjhyett</a>),
				and Tom Preston-Werner (<a href="https://github.com/mojombo"
					class="user-mention">@mojombo</a>) founded GitHub.
			</p>

			<h3>Support or Contact</h3>

			<p>
				Having trouble with Pages? Check out the documentation at <a
					href="http://help.github.com/pages">http://help.github.com/pages</a>
				or contact <a href="mailto:support@github.com">support@github.com</a>
				and we’ll help you sort it out.
			</p>
		</section>
		<footer>
			<p>
				This project is maintained by <a
					href="https://github.com/alvinkwang">alvinkwang</a>
			</p>
			<p>
				<small>Hosted on GitHub Pages &mdash; Theme by <a
					href="https://github.com/orderedlist">orderedlist</a></small>
			</p>
		</footer>
	</div>
	<script src="javascripts/scale.fix.js"></script>

</body>
</html>
